{"version":3,"sources":["assets/scripts/ExplosionEffect.js"],"names":["cc","Class","Component","properties","damage","type","Integer","tooltip","duration","Float","onLoad","collider","getComponent","BoxCollider","addComponent","size","node","group","scheduleOnce","isValid","log","destroy","onCollisionEnter","other","self","player","takeDamage","onDestroy","unscheduleAllCallbacks"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,MAAM,EAAE;MACJ,WAAS,EADL;MAEJC,IAAI,EAAEL,EAAE,CAACM,OAFL;MAGJC,OAAO,EAAE;IAHL,CADA;IAMRC,QAAQ,EAAE;MACN,WAAS,GADH;MAENH,IAAI,EAAEL,EAAE,CAACS,KAFH;MAGNF,OAAO,EAAE;IAHH;EANF,CAHP;EAgBLG,MAhBK,oBAgBI;IAAA;;IACL;IACA,IAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBZ,EAAE,CAACa,WAArB,CAAf;;IACA,IAAI,CAACF,QAAL,EAAe;MACXA,QAAQ,GAAG,KAAKG,YAAL,CAAkBd,EAAE,CAACa,WAArB,CAAX;MACAF,QAAQ,CAACI,IAAT,GAAgBf,EAAE,CAACe,IAAH,CAAQ,EAAR,EAAY,EAAZ,CAAhB,CAFW,CAEsB;IACpC,CANI,CAQL;;;IACA,KAAKC,IAAL,CAAUC,KAAV,GAAkB,WAAlB,CATK,CAWL;;IACA,KAAKC,YAAL,CAAkB,YAAM;MACpB,IAAI,KAAI,CAACF,IAAL,IAAa,KAAI,CAACA,IAAL,CAAUG,OAA3B,EAAoC;QAChCnB,EAAE,CAACoB,GAAH,CAAO,iBAAP;;QACA,KAAI,CAACJ,IAAL,CAAUK,OAAV;MACH;IACJ,CALD,EAKG,KAAKb,QALR;EAMH,CAlCI;EAoCLc,gBApCK,4BAoCYC,KApCZ,EAoCmBC,IApCnB,EAoCyB;IAC1BxB,EAAE,CAACoB,GAAH,CAAO,gBAAP,EAAyBG,KAAK,CAACP,IAAN,CAAWC,KAApC;;IAEA,IAAIM,KAAK,CAACP,IAAN,CAAWC,KAAX,KAAqB,QAAzB,EAAmC;MAC/B;MACA,IAAIQ,MAAM,GAAGF,KAAK,CAACP,IAAN,CAAWJ,YAAX,CAAwB,QAAxB,CAAb;;MACA,IAAIa,MAAM,IAAIA,MAAM,CAACC,UAArB,EAAiC;QAC7BD,MAAM,CAACC,UAAP,CAAkB,KAAKtB,MAAvB;QACAJ,EAAE,CAACoB,GAAH,CAAO,cAAP,EAAuB,KAAKhB,MAA5B;MACH;IACJ;EACJ,CA/CI;EAiDLuB,SAjDK,uBAiDO;IACR,KAAKC,sBAAL;IACA5B,EAAE,CAACoB,GAAH,CAAO,SAAP;EACH;AApDI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        damage: {\n            default: 20,\n            type: cc.Integer,\n            tooltip: '爆炸伤害'\n        },\n        duration: {\n            default: 0.5,\n            type: cc.Float,\n            tooltip: '爆炸持续时间'\n        }\n    },\n\n    onLoad() {\n        // 添加碰撞组件\n        let collider = this.getComponent(cc.BoxCollider);\n        if (!collider) {\n            collider = this.addComponent(cc.BoxCollider);\n            collider.size = cc.size(40, 40); // 设置爆炸范围\n        }\n\n        // 设置碰撞分组\n        this.node.group = 'explosion';\n\n        // 在duration时间后自动销毁爆炸效果\n        this.scheduleOnce(() => {\n            if (this.node && this.node.isValid) {\n                cc.log('爆炸效果到达持续时间，自动销毁');\n                this.node.destroy();\n            }\n        }, this.duration);\n    },\n\n    onCollisionEnter(other, self) {\n        cc.log('爆炸效果碰撞 - 碰撞对象:', other.node.group);\n        \n        if (other.node.group === 'player') {\n            // 对玩家造成伤害\n            let player = other.node.getComponent('Player');\n            if (player && player.takeDamage) {\n                player.takeDamage(this.damage);\n                cc.log('爆炸效果对玩家造成伤害:', this.damage);\n            }\n        }\n    },\n\n    onDestroy() {\n        this.unscheduleAllCallbacks();\n        cc.log('爆炸效果被销毁');\n    }\n}); "]}