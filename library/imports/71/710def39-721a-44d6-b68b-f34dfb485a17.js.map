{"version":3,"sources":["assets/scripts/GameManager.js"],"names":["cc","Class","Component","properties","starCountLabel","type","Label","tooltip","goldLabel","tiledMap","TiledMap","starCount","Integer","_goldCount","statics","instance","onLoad","GameManager","node","destroy","updateStarDisplay","error","addStar","string","log","updateGold","amount"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,cAAc,EAAE;MACZ,WAAS,IADG;MAEZC,IAAI,EAAEL,EAAE,CAACM,KAFG;MAGZC,OAAO,EAAE;IAHG,CADR;IAMRC,SAAS,EAAE;MACP,WAAS,IADF;MAEPH,IAAI,EAAEL,EAAE,CAACM,KAFF;MAGPC,OAAO,EAAE;IAHF,CANH;IAWRE,QAAQ,EAAE;MACN,WAAS,IADH;MAENJ,IAAI,EAAEL,EAAE,CAACU,QAFH;MAGNH,OAAO,EAAE;IAHH,CAXF;IAgBRI,SAAS,EAAE;MACP,WAAS,CADF;MAEPN,IAAI,EAAEL,EAAE,CAACY,OAFF;MAGPL,OAAO,EAAE;IAHF,CAhBH;IAqBRM,UAAU,EAAE;EArBJ,CAHP;EA2BLC,OAAO,EAAE;IACLC,QAAQ,EAAE;EADL,CA3BJ;EA+BLC,MA/BK,oBA+BI;IACL;IACA,IAAIC,WAAW,CAACF,QAAhB,EAA0B;MACtB,KAAKG,IAAL,CAAUC,OAAV;MACA;IACH;;IACDF,WAAW,CAACF,QAAZ,GAAuB,IAAvB,CANK,CAQL;;IACA,KAAKJ,SAAL,GAAiB,CAAjB;IACA,KAAKE,UAAL,GAAkB,CAAlB,CAVK,CAYL;;IACA,KAAKO,iBAAL,GAbK,CAeL;;IACA,IAAI,CAAC,KAAKhB,cAAV,EAA0B;MACtBJ,EAAE,CAACqB,KAAH,CAAS,kCAAT;IACH;EACJ,CAlDI;EAoDLC,OApDK,qBAoDK;IACN,KAAKX,SAAL;IACA,KAAKS,iBAAL;EACH,CAvDI;EAyDLA,iBAzDK,+BAyDe;IAChB,IAAI,KAAKhB,cAAT,EAAyB;MACrB,KAAKA,cAAL,CAAoBmB,MAApB,QAAgC,KAAKZ,SAArC;MACAX,EAAE,CAACwB,GAAH,CAAO,uBAAP,EAAgC,KAAKb,SAArC;IACH,CAHD,MAGO;MACHX,EAAE,CAACqB,KAAH,CAAS,2CAAT;IACH;EACJ,CAhEI;EAkELI,UAlEK,sBAkEMC,MAlEN,EAkEc;IACf,KAAKb,UAAL,GAAkBa,MAAlB;IACA1B,EAAE,CAACwB,GAAH,CAAO,uBAAP,EAAgC,KAAKX,UAArC;EACH;AArEI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        starCountLabel: {\n            default: null,\n            type: cc.Label,\n            tooltip: '显示星星数量的Label组件'\n        },\n        goldLabel: {\n            default: null,\n            type: cc.Label,\n            tooltip: '金币数量显示文本'\n        },\n        tiledMap: {\n            default: null,\n            type: cc.TiledMap,\n            tooltip: '地图'\n        },\n        starCount: {\n            default: 0,\n            type: cc.Integer,\n            tooltip: '星星数量'\n        },\n        _goldCount: 0\n    },\n\n    statics: {\n        instance: null\n    },\n\n    onLoad() {\n        // 确保在场景中只有一个 GameManager 实例\n        if (GameManager.instance) {\n            this.node.destroy();\n            return;\n        }\n        GameManager.instance = this;\n        \n        // 初始化计数\n        this.starCount = 0;\n        this._goldCount = 0;\n        \n        // 更新显示\n        this.updateStarDisplay();\n        \n        // 检查并输出调试信息\n        if (!this.starCountLabel) {\n            cc.error('GameManager: starCountLabel 未设置!');\n        }\n    },\n\n    addStar() {\n        this.starCount++;\n        this.updateStarDisplay();\n    },\n\n    updateStarDisplay() {\n        if (this.starCountLabel) {\n            this.starCountLabel.string = `${this.starCount}`;\n            cc.log('GameManager: 更新星星数量为:', this.starCount);\n        } else {\n            cc.error('GameManager: starCountLabel 未设置，无法显示星星数量!');\n        }\n    },\n\n    updateGold(amount) {\n        this._goldCount = amount;\n        cc.log('GameManager: 更新金币数量为:', this._goldCount);\n    }\n});\n"]}