
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Monster.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9d5a02WiMxF572qa+T4fVyu', 'Monster');
// scripts/Monster.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    maxHealth: {
      "default": 100,
      type: cc.Integer,
      tooltip: '怪物最大生命值'
    },
    collectAudio: {
      "default": null,
      type: cc.AudioClip,
      tooltip: '收集星星的音效'
    },
    currentHealth: {
      "default": 100,
      type: cc.Integer,
      tooltip: '怪物当前生命值'
    },
    healthBar: {
      "default": null,
      type: cc.Node,
      tooltip: '血条节点'
    },
    hitAudio: {
      "default": null,
      type: cc.AudioClip,
      tooltip: '受击音效'
    },
    deathAudio: {
      "default": null,
      type: cc.AudioClip,
      tooltip: '死亡音效'
    },
    bombPrefab: {
      "default": null,
      type: cc.Prefab,
      tooltip: '炸弹预制体'
    },
    starPrefab: {
      "default": null,
      type: cc.Prefab,
      tooltip: '星星预制体'
    },
    detectionRadius: {
      "default": 300,
      type: cc.Float,
      tooltip: '检测玩家的范围'
    },
    moveSpeed: {
      "default": 50,
      type: cc.Float,
      tooltip: '移动速度'
    },
    shootInterval: {
      "default": 2.0,
      type: cc.Float,
      tooltip: '发射间隔'
    }
  },
  onLoad: function onLoad() {
    this.currentHealth = this.maxHealth;
    this.lastShootTime = 0; // 确保初始化射击时间
    // 检查是否有炸弹预制体

    if (!this.bombPrefab) {
      cc.error('未设置炸弹预制体！');
    } // 确保有碰撞组件


    var collider = this.getComponent(cc.BoxCollider);

    if (!collider) {
      collider = this.addComponent(cc.BoxCollider);
      collider.size.width = this.node.width;
      collider.size.height = this.node.height;
    } // 设置碰撞组


    this.node.group = 'monster'; // 获取血条中的 Bar 节点

    if (this.healthBar) {
      this.barNode = this.healthBar.getChildByName('Bar');

      if (!this.barNode) {
        cc.error('找不到 Bar 节点！');
        return;
      } // 保存初始宽度


      this.originalBarWidth = this.barNode.width;
      cc.log('血条初始宽度：', this.originalBarWidth);
    } else {
      cc.error('未设置血条节点！');
    } // 添加死亡标记


    this.isDying = false; // 添加刚体组件

    var rigidBody = this.getComponent(cc.RigidBody);

    if (!rigidBody) {
      rigidBody = this.addComponent(cc.RigidBody);
      rigidBody.type = cc.RigidBodyType.Dynamic;
      rigidBody.fixedRotation = true;
    }
  },
  createHealthBar: function createHealthBar() {
    // 创建血条节点
    var healthBarNode = new cc.Node('HealthBar');
    this.node.addChild(healthBarNode);
    healthBarNode.zIndex = 1; // 创建背景条

    var barBgNode = new cc.Node('BarBg');
    healthBarNode.addChild(barBgNode);
    var barBgSprite = barBgNode.addComponent(cc.Sprite);
    barBgSprite.color = cc.Color.RED; // 创建血量条

    var barNode = new cc.Node('Bar');
    healthBarNode.addChild(barNode);
    var barSprite = barNode.addComponent(cc.Sprite);
    barSprite.color = cc.Color.GREEN; // 设置血条尺寸和位置

    healthBarNode.width = 100;
    healthBarNode.height = 10;
    barBgNode.width = 100;
    barBgNode.height = 10;
    barNode.width = 100;
    barNode.height = 10; // 将血条放在怪物上方

    healthBarNode.setPosition(0, this.node.height / 2 + 10); // 保存引用

    this.healthBar = healthBarNode;
    this.healthBarBg = barBgNode;
  },
  start: function start() {
    this.updateHealthBar();
  },
  takeDamage: function takeDamage(damage) {
    // 如果已经在死亡过程中，不再处理伤害
    if (this.isDying) return;
    if (typeof damage !== 'number' || damage <= 0) return; // 使用 playEffect 播放音效

    if (this.hitAudio) {
      cc.audioEngine.playEffect(this.hitAudio, false, 0.3);
    } // 减少生命值


    this.currentHealth = Math.max(0, this.currentHealth - damage); // 更新血条显示

    if (this.barNode && this.originalBarWidth) {
      var healthPercentage = this.currentHealth / this.maxHealth;
      this.barNode.width = this.originalBarWidth * healthPercentage;
    }

    cc.log('怪物受到伤害:', damage, '当前生命值:', this.currentHealth); // 检查是否死亡

    if (this.currentHealth <= 0 && !this.isDying) {
      this.die();
    }
  },
  updateHealthBar: function updateHealthBar() {
    if (this.healthBar) {
      var healthPercentage = this.currentHealth / this.maxHealth;
      this.healthBar.width = 100 * healthPercentage;
    }
  },
  die: function die() {
    var _this = this;

    // 设置死亡标记
    if (this.isDying) return;
    this.isDying = true; // 使用 playEffect 播放音效

    if (this.deathAudio) {
      var audioId = cc.audioEngine.playEffect(this.deathAudio, false, 0.3);
      cc.audioEngine.setFinishCallback(audioId, function () {
        _this.node.destroy();
      });
    } else {
      this.node.destroy();
    } // 生成星星


    this.spawnStars(3);
  },
  spawnStars: function spawnStars(count) {
    var _this2 = this;

    if (!this.starPrefab) {
      cc.error('星星预制体未设置!');
      return;
    }

    var canvasNode = cc.find('Canvas');
    var worldPos = this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);
    var gameManager = canvasNode.getComponent('GameManager');

    var _loop = function _loop(i) {
      var star = cc.instantiate(_this2.starPrefab);
      star.parent = canvasNode;
      star.zIndex = 999;
      var localPos = canvasNode.convertToNodeSpaceAR(worldPos); // 随机位置偏移

      var offsetX = (Math.random() - 0.5) * 100;
      var offsetY = (Math.random() - 0.5) * 100;
      star.setPosition(localPos.x + offsetX, localPos.y + offsetY); // 获取目标星星收集点

      var starNode = cc.find('Canvas/game/starCollect/star');

      if (!starNode) {
        cc.error('找不到star node！');
        star.destroy();
        return "continue";
      }

      var worldTargetPos = starNode.getPosition(); // 加载并播放收集音效

      cc.resources.load('audios/collect', cc.AudioClip, function (err, audioClip) {
        if (err) {
          cc.error('加载收集音效失败:', err);
          return;
        }

        cc.audioEngine.playEffect(audioClip, false, 3.0);
      }); // 创建飞向目标的动作

      var moveAction = cc.sequence(cc.moveTo(0.5, worldTargetPos).easing(cc.easeBackIn()), cc.callFunc(function () {
        // 通知GameManager增加星星数量
        if (gameManager) {
          gameManager.addStar();
        }

        star.destroy();
      }));
      star.runAction(moveAction);
    };

    for (var i = 0; i < count; i++) {
      var _ret = _loop(i);

      if (_ret === "continue") continue;
    }
  },
  update: function update(dt) {
    if (this.isDying) return; // 获取玩家节点

    var player = cc.find('Canvas/game/player');

    if (!player) {
      cc.warn('找不到玩家节点！请确保场景中玩家节点的路径是 Canvas/game/player');
      return;
    } // 获取世界坐标下的位置


    var monsterPos = this.node.parent.convertToWorldSpaceAR(this.node.position);
    var playerPos = player.parent.convertToWorldSpaceAR(player.position); // 计算与玩家的距离

    var distance = cc.Vec2.distance(cc.v2(monsterPos.x, monsterPos.y), cc.v2(playerPos.x, playerPos.y)); // 添加调试日志

    cc.log('怪物位置:', monsterPos, '玩家位置:', playerPos, '距离:', distance, '检测范围:', this.detectionRadius); // 在检测范围内

    if (distance < this.detectionRadius) {
      // 追踪玩家
      var direction = cc.v2(playerPos.x - monsterPos.x, playerPos.y - monsterPos.y).normalize();
      var velocity = this.node.getComponent(cc.RigidBody).linearVelocity;
      velocity.x = direction.x * this.moveSpeed;
      velocity.y = direction.y * this.moveSpeed;
      this.node.getComponent(cc.RigidBody).linearVelocity = velocity;
      cc.log('怪物正在移动，速度:', velocity); // 发射炸弹

      this.shootBomb(player.position);
    } else {
      // 停止移动
      var _velocity = this.node.getComponent(cc.RigidBody).linearVelocity;
      _velocity.x = 0;
      _velocity.y = 0;
      this.node.getComponent(cc.RigidBody).linearVelocity = _velocity;
      cc.log('怪物停止移动，超出检测范围');
    }
  },
  shootBomb: function shootBomb(targetPos) {
    var currentTime = cc.director.getTotalTime() / 1000;
    cc.log('尝试发射炸弹 - 当前时间:', currentTime, '上次发射时间:', this.lastShootTime, '发射间隔:', this.shootInterval, '是否可以发射:', currentTime - this.lastShootTime >= this.shootInterval);

    if (currentTime - this.lastShootTime < this.shootInterval) {
      return;
    }

    if (!this.bombPrefab) {
      cc.error('炸弹预制体未设置！请在编辑器中设置 Monster 组件的 Bomb Prefab 属性');
      return;
    }

    this.lastShootTime = currentTime; // 创建炸弹

    var bomb = cc.instantiate(this.bombPrefab);

    if (!bomb) {
      cc.error('炸弹预制体实例化失败！');
      return;
    } // 设置炸弹位置为怪物当前位置


    bomb.setPosition(this.node.position);
    this.node.parent.addChild(bomb); // 计算方向（使用本地坐标）

    var direction = targetPos.sub(this.node.position); // 设置炸弹属性

    var bombComp = bomb.getComponent('Bomb');

    if (bombComp) {
      bombComp.setDirection(direction);
      bombComp.setSpeed(300); // 增加速度使炸弹移动更明显

      bombComp.setDamage(20);
      cc.log('炸弹已发射！方向:', direction, '目标位置:', targetPos, '当前位置:', this.node.position);
    } else {
      cc.error('炸弹没有Bomb组件！请确保炸弹预制体已添加 Bomb 组件');
      bomb.destroy();
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL01vbnN0ZXIuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJtYXhIZWFsdGgiLCJ0eXBlIiwiSW50ZWdlciIsInRvb2x0aXAiLCJjb2xsZWN0QXVkaW8iLCJBdWRpb0NsaXAiLCJjdXJyZW50SGVhbHRoIiwiaGVhbHRoQmFyIiwiTm9kZSIsImhpdEF1ZGlvIiwiZGVhdGhBdWRpbyIsImJvbWJQcmVmYWIiLCJQcmVmYWIiLCJzdGFyUHJlZmFiIiwiZGV0ZWN0aW9uUmFkaXVzIiwiRmxvYXQiLCJtb3ZlU3BlZWQiLCJzaG9vdEludGVydmFsIiwib25Mb2FkIiwibGFzdFNob290VGltZSIsImVycm9yIiwiY29sbGlkZXIiLCJnZXRDb21wb25lbnQiLCJCb3hDb2xsaWRlciIsImFkZENvbXBvbmVudCIsInNpemUiLCJ3aWR0aCIsIm5vZGUiLCJoZWlnaHQiLCJncm91cCIsImJhck5vZGUiLCJnZXRDaGlsZEJ5TmFtZSIsIm9yaWdpbmFsQmFyV2lkdGgiLCJsb2ciLCJpc0R5aW5nIiwicmlnaWRCb2R5IiwiUmlnaWRCb2R5IiwiUmlnaWRCb2R5VHlwZSIsIkR5bmFtaWMiLCJmaXhlZFJvdGF0aW9uIiwiY3JlYXRlSGVhbHRoQmFyIiwiaGVhbHRoQmFyTm9kZSIsImFkZENoaWxkIiwiekluZGV4IiwiYmFyQmdOb2RlIiwiYmFyQmdTcHJpdGUiLCJTcHJpdGUiLCJjb2xvciIsIkNvbG9yIiwiUkVEIiwiYmFyU3ByaXRlIiwiR1JFRU4iLCJzZXRQb3NpdGlvbiIsImhlYWx0aEJhckJnIiwic3RhcnQiLCJ1cGRhdGVIZWFsdGhCYXIiLCJ0YWtlRGFtYWdlIiwiZGFtYWdlIiwiYXVkaW9FbmdpbmUiLCJwbGF5RWZmZWN0IiwiTWF0aCIsIm1heCIsImhlYWx0aFBlcmNlbnRhZ2UiLCJkaWUiLCJhdWRpb0lkIiwic2V0RmluaXNoQ2FsbGJhY2siLCJkZXN0cm95Iiwic3Bhd25TdGFycyIsImNvdW50IiwiY2FudmFzTm9kZSIsImZpbmQiLCJ3b3JsZFBvcyIsImNvbnZlcnRUb1dvcmxkU3BhY2VBUiIsIlZlYzIiLCJaRVJPIiwiZ2FtZU1hbmFnZXIiLCJpIiwic3RhciIsImluc3RhbnRpYXRlIiwicGFyZW50IiwibG9jYWxQb3MiLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsIm9mZnNldFgiLCJyYW5kb20iLCJvZmZzZXRZIiwieCIsInkiLCJzdGFyTm9kZSIsIndvcmxkVGFyZ2V0UG9zIiwiZ2V0UG9zaXRpb24iLCJyZXNvdXJjZXMiLCJsb2FkIiwiZXJyIiwiYXVkaW9DbGlwIiwibW92ZUFjdGlvbiIsInNlcXVlbmNlIiwibW92ZVRvIiwiZWFzaW5nIiwiZWFzZUJhY2tJbiIsImNhbGxGdW5jIiwiYWRkU3RhciIsInJ1bkFjdGlvbiIsInVwZGF0ZSIsImR0IiwicGxheWVyIiwid2FybiIsIm1vbnN0ZXJQb3MiLCJwb3NpdGlvbiIsInBsYXllclBvcyIsImRpc3RhbmNlIiwidjIiLCJkaXJlY3Rpb24iLCJub3JtYWxpemUiLCJ2ZWxvY2l0eSIsImxpbmVhclZlbG9jaXR5Iiwic2hvb3RCb21iIiwidGFyZ2V0UG9zIiwiY3VycmVudFRpbWUiLCJkaXJlY3RvciIsImdldFRvdGFsVGltZSIsImJvbWIiLCJzdWIiLCJib21iQ29tcCIsInNldERpcmVjdGlvbiIsInNldFNwZWVkIiwic2V0RGFtYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztFQUNMLFdBQVNELEVBQUUsQ0FBQ0UsU0FEUDtFQUdMQyxVQUFVLEVBQUU7SUFDUkMsU0FBUyxFQUFFO01BQ1AsV0FBUyxHQURGO01BRVBDLElBQUksRUFBRUwsRUFBRSxDQUFDTSxPQUZGO01BR1BDLE9BQU8sRUFBRTtJQUhGLENBREg7SUFNUkMsWUFBWSxFQUFFO01BQ1YsV0FBUyxJQURDO01BRVZILElBQUksRUFBRUwsRUFBRSxDQUFDUyxTQUZDO01BR1ZGLE9BQU8sRUFBRTtJQUhDLENBTk47SUFX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Q0FvRyxJQUFJLENBQUN0RCxPQUFMO0lBQ0g7RUFDSjtBQTFWSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJjYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuIFxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgbWF4SGVhbHRoOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiAxMDAsXG4gICAgICAgICAgICB0eXBlOiBjYy5JbnRlZ2VyLFxuICAgICAgICAgICAgdG9vbHRpcDogJ+aAqueJqeacgOWkp+eUn+WRveWAvCdcbiAgICAgICAgfSxcbiAgICAgICAgY29sbGVjdEF1ZGlvOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuQXVkaW9DbGlwLFxuICAgICAgICAgICAgdG9vbHRpcDogJ+aUtumbhuaYn+aYn+eahOmfs+aViCdcbiAgICAgICAgfSxcbiAgICAgICAgY3VycmVudEhlYWx0aDoge1xuICAgICAgICAgICAgZGVmYXVsdDogMTAwLFxuICAgICAgICAgICAgdHlwZTogY2MuSW50ZWdlcixcbiAgICAgICAgICAgIHRvb2x0aXA6ICfmgKrnianlvZPliY3nlJ/lkb3lgLwnXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWx0aEJhcjoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGUsXG4gICAgICAgICAgICB0b29sdGlwOiAn6KGA5p2h6IqC54K5J1xuICAgICAgICB9LFxuICAgICAgICBoaXRBdWRpbzoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvQ2xpcCxcbiAgICAgICAgICAgIHRvb2x0aXA6ICflj5flh7vpn7PmlYgnXG4gICAgICAgIH0sXG4gICAgICAgIGRlYXRoQXVkaW86IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXAsXG4gICAgICAgICAgICB0b29sdGlwOiAn5q275Lqh6Z+z5pWIJ1xuICAgICAgICB9LFxuICAgICAgICBib21iUHJlZmFiOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuUHJlZmFiLFxuICAgICAgICAgICAgdG9vbHRpcDogJ+eCuOW8uemihOWItuS9kydcbiAgICAgICAgfSxcbiAgICAgICAgc3RhclByZWZhYjoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLlByZWZhYixcbiAgICAgICAgICAgIHRvb2x0aXA6ICfmmJ/mmJ/pooTliLbkvZMnXG4gICAgICAgIH0sXG4gICAgICAgIGRldGVjdGlvblJhZGl1czoge1xuICAgICAgICAgICAgZGVmYXVsdDogMzAwLFxuICAgICAgICAgICAgdHlwZTogY2MuRmxvYXQsXG4gICAgICAgICAgICB0b29sdGlwOiAn5qOA5rWL546p5a6255qE6IyD5Zu0J1xuICAgICAgICB9LFxuICAgICAgICBtb3ZlU3BlZWQ6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IDUwLFxuICAgICAgICAgICAgdHlwZTogY2MuRmxvYXQsXG4gICAgICAgICAgICB0b29sdGlwOiAn56e75Yqo6YCf5bqmJ1xuICAgICAgICB9LFxuICAgICAgICBzaG9vdEludGVydmFsOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiAyLjAsXG4gICAgICAgICAgICB0eXBlOiBjYy5GbG9hdCxcbiAgICAgICAgICAgIHRvb2x0aXA6ICflj5HlsITpl7TpmpQnXG4gICAgICAgIH1cbiAgICB9LFxuIFxuICAgIG9uTG9hZCgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50SGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XG4gICAgICAgIHRoaXMubGFzdFNob290VGltZSA9IDA7IC8vIOehruS/neWIneWni+WMluWwhOWHu+aXtumXtFxuICAgICAgICBcbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJ54K45by56aKE5Yi25L2TXG4gICAgICAgIGlmICghdGhpcy5ib21iUHJlZmFiKSB7XG4gICAgICAgICAgICBjYy5lcnJvcign5pyq6K6+572u54K45by56aKE5Yi25L2T77yBJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOehruS/neacieeisOaSnue7hOS7tlxuICAgICAgICBsZXQgY29sbGlkZXIgPSB0aGlzLmdldENvbXBvbmVudChjYy5Cb3hDb2xsaWRlcik7XG4gICAgICAgIGlmICghY29sbGlkZXIpIHtcbiAgICAgICAgICAgIGNvbGxpZGVyID0gdGhpcy5hZGRDb21wb25lbnQoY2MuQm94Q29sbGlkZXIpO1xuICAgICAgICAgICAgY29sbGlkZXIuc2l6ZS53aWR0aCA9IHRoaXMubm9kZS53aWR0aDtcbiAgICAgICAgICAgIGNvbGxpZGVyLnNpemUuaGVpZ2h0ID0gdGhpcy5ub2RlLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICAvLyDorr7nva7norDmkp7nu4RcbiAgICAgICAgdGhpcy5ub2RlLmdyb3VwID0gJ21vbnN0ZXInO1xuIFxuICAgICAgICAvLyDojrflj5booYDmnaHkuK3nmoQgQmFyIOiKgueCuVxuICAgICAgICBpZiAodGhpcy5oZWFsdGhCYXIpIHtcbiAgICAgICAgICAgIHRoaXMuYmFyTm9kZSA9IHRoaXMuaGVhbHRoQmFyLmdldENoaWxkQnlOYW1lKCdCYXInKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5iYXJOb2RlKSB7XG4gICAgICAgICAgICAgICAgY2MuZXJyb3IoJ+aJvuS4jeWIsCBCYXIg6IqC54K577yBJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5L+d5a2Y5Yid5aeL5a695bqmXG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsQmFyV2lkdGggPSB0aGlzLmJhck5vZGUud2lkdGg7XG4gICAgICAgICAgICBjYy5sb2coJ+ihgOadoeWIneWni+WuveW6pu+8micsIHRoaXMub3JpZ2luYWxCYXJXaWR0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYy5lcnJvcign5pyq6K6+572u6KGA5p2h6IqC54K577yBJyk7XG4gICAgICAgIH1cbiBcbiAgICAgICAgLy8g5re75Yqg5q275Lqh5qCH6K6wXG4gICAgICAgIHRoaXMuaXNEeWluZyA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgLy8g5re75Yqg5Yia5L2T57uE5Lu2XG4gICAgICAgIGxldCByaWdpZEJvZHkgPSB0aGlzLmdldENvbXBvbmVudChjYy5SaWdpZEJvZHkpO1xuICAgICAgICBpZiAoIXJpZ2lkQm9keSkge1xuICAgICAgICAgICAgcmlnaWRCb2R5ID0gdGhpcy5hZGRDb21wb25lbnQoY2MuUmlnaWRCb2R5KTtcbiAgICAgICAgICAgIHJpZ2lkQm9keS50eXBlID0gY2MuUmlnaWRCb2R5VHlwZS5EeW5hbWljO1xuICAgICAgICAgICAgcmlnaWRCb2R5LmZpeGVkUm90YXRpb24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcbiBcbiAgICBjcmVhdGVIZWFsdGhCYXIoKSB7XG4gICAgICAgIC8vIOWIm+W7uuihgOadoeiKgueCuVxuICAgICAgICBsZXQgaGVhbHRoQmFyTm9kZSA9IG5ldyBjYy5Ob2RlKCdIZWFsdGhCYXInKTtcbiAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKGhlYWx0aEJhck5vZGUpO1xuICAgICAgICBoZWFsdGhCYXJOb2RlLnpJbmRleCA9IDE7XG4gICAgICAgIFxuICAgICAgICAvLyDliJvlu7rog4zmma/mnaFcbiAgICAgICAgbGV0IGJhckJnTm9kZSA9IG5ldyBjYy5Ob2RlKCdCYXJCZycpO1xuICAgICAgICBoZWFsdGhCYXJOb2RlLmFkZENoaWxkKGJhckJnTm9kZSk7XG4gICAgICAgIGxldCBiYXJCZ1Nwcml0ZSA9IGJhckJnTm9kZS5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcbiAgICAgICAgYmFyQmdTcHJpdGUuY29sb3IgPSBjYy5Db2xvci5SRUQ7XG4gICAgICAgIFxuICAgICAgICAvLyDliJvlu7rooYDph4/mnaFcbiAgICAgICAgbGV0IGJhck5vZGUgPSBuZXcgY2MuTm9kZSgnQmFyJyk7XG4gICAgICAgIGhlYWx0aEJhck5vZGUuYWRkQ2hpbGQoYmFyTm9kZSk7XG4gICAgICAgIGxldCBiYXJTcHJpdGUgPSBiYXJOb2RlLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xuICAgICAgICBiYXJTcHJpdGUuY29sb3IgPSBjYy5Db2xvci5HUkVFTjtcbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9ruihgOadoeWwuuWvuOWSjOS9jee9rlxuICAgICAgICBoZWFsdGhCYXJOb2RlLndpZHRoID0gMTAwO1xuICAgICAgICBoZWFsdGhCYXJOb2RlLmhlaWdodCA9IDEwO1xuICAgICAgICBiYXJCZ05vZGUud2lkdGggPSAxMDA7XG4gICAgICAgIGJhckJnTm9kZS5oZWlnaHQgPSAxMDtcbiAgICAgICAgYmFyTm9kZS53aWR0aCA9IDEwMDtcbiAgICAgICAgYmFyTm9kZS5oZWlnaHQgPSAxMDtcbiAgICAgICAgXG4gICAgICAgIC8vIOWwhuihgOadoeaUvuWcqOaAqueJqeS4iuaWuVxuICAgICAgICBoZWFsdGhCYXJOb2RlLnNldFBvc2l0aW9uKDAsIHRoaXMubm9kZS5oZWlnaHQgLyAyICsgMTApO1xuICAgICAgICBcbiAgICAgICAgLy8g5L+d5a2Y5byV55SoXG4gICAgICAgIHRoaXMuaGVhbHRoQmFyID0gaGVhbHRoQmFyTm9kZTtcbiAgICAgICAgdGhpcy5oZWFsdGhCYXJCZyA9IGJhckJnTm9kZTtcbiAgICB9LFxuIFxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xuICAgIH0sXG4gXG4gICAgdGFrZURhbWFnZShkYW1hZ2UpIHtcbiAgICAgICAgLy8g5aaC5p6c5bey57uP5Zyo5q275Lqh6L+H56iL5Lit77yM5LiN5YaN5aSE55CG5Lyk5a6zXG4gICAgICAgIGlmICh0aGlzLmlzRHlpbmcpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgZGFtYWdlICE9PSAnbnVtYmVyJyB8fCBkYW1hZ2UgPD0gMCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgLy8g5L2/55SoIHBsYXlFZmZlY3Qg5pKt5pS+6Z+z5pWIXG4gICAgICAgIGlmICh0aGlzLmhpdEF1ZGlvKSB7XG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5RWZmZWN0KHRoaXMuaGl0QXVkaW8sIGZhbHNlLCAwLjMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlh4/lsJHnlJ/lkb3lgLxcbiAgICAgICAgdGhpcy5jdXJyZW50SGVhbHRoID0gTWF0aC5tYXgoMCwgdGhpcy5jdXJyZW50SGVhbHRoIC0gZGFtYWdlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOabtOaWsOihgOadoeaYvuekulxuICAgICAgICBpZiAodGhpcy5iYXJOb2RlICYmIHRoaXMub3JpZ2luYWxCYXJXaWR0aCkge1xuICAgICAgICAgICAgbGV0IGhlYWx0aFBlcmNlbnRhZ2UgPSB0aGlzLmN1cnJlbnRIZWFsdGggLyB0aGlzLm1heEhlYWx0aDtcbiAgICAgICAgICAgIHRoaXMuYmFyTm9kZS53aWR0aCA9IHRoaXMub3JpZ2luYWxCYXJXaWR0aCAqIGhlYWx0aFBlcmNlbnRhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNjLmxvZygn5oCq54mp5Y+X5Yiw5Lyk5a6zOicsIGRhbWFnZSwgJ+W9k+WJjeeUn+WRveWAvDonLCB0aGlzLmN1cnJlbnRIZWFsdGgpO1xuICAgICAgICBcbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5q275LqhXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRIZWFsdGggPD0gMCAmJiAhdGhpcy5pc0R5aW5nKSB7XG4gICAgICAgICAgICB0aGlzLmRpZSgpO1xuICAgICAgICB9XG4gICAgfSxcbiBcbiAgICB1cGRhdGVIZWFsdGhCYXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmhlYWx0aEJhcikge1xuICAgICAgICAgICAgbGV0IGhlYWx0aFBlcmNlbnRhZ2UgPSB0aGlzLmN1cnJlbnRIZWFsdGggLyB0aGlzLm1heEhlYWx0aDtcbiAgICAgICAgICAgIHRoaXMuaGVhbHRoQmFyLndpZHRoID0gMTAwICogaGVhbHRoUGVyY2VudGFnZTtcbiAgICAgICAgfVxuICAgIH0sXG4gXG4gICAgZGllKCkge1xuICAgICAgICAvLyDorr7nva7mrbvkuqHmoIforrBcbiAgICAgICAgaWYgKHRoaXMuaXNEeWluZykgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzRHlpbmcgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgLy8g5L2/55SoIHBsYXlFZmZlY3Qg5pKt5pS+6Z+z5pWIXG4gICAgICAgIGlmICh0aGlzLmRlYXRoQXVkaW8pIHtcbiAgICAgICAgICAgIGxldCBhdWRpb0lkID0gY2MuYXVkaW9FbmdpbmUucGxheUVmZmVjdCh0aGlzLmRlYXRoQXVkaW8sIGZhbHNlLCAwLjMpO1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUuc2V0RmluaXNoQ2FsbGJhY2soYXVkaW9JZCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g55Sf5oiQ5pif5pifXG4gICAgICAgIHRoaXMuc3Bhd25TdGFycygzKTtcbiAgICB9LFxuXG4gICAgc3Bhd25TdGFycyhjb3VudCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhclByZWZhYikge1xuICAgICAgICAgICAgY2MuZXJyb3IoJ+aYn+aYn+mihOWItuS9k+acquiuvue9riEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbnZhc05vZGUgPSBjYy5maW5kKCdDYW52YXMnKTtcbiAgICAgICAgY29uc3Qgd29ybGRQb3MgPSB0aGlzLm5vZGUuY29udmVydFRvV29ybGRTcGFjZUFSKGNjLlZlYzIuWkVSTyk7XG4gICAgICAgIGNvbnN0IGdhbWVNYW5hZ2VyID0gY2FudmFzTm9kZS5nZXRDb21wb25lbnQoJ0dhbWVNYW5hZ2VyJyk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzdGFyID0gY2MuaW5zdGFudGlhdGUodGhpcy5zdGFyUHJlZmFiKTtcbiAgICAgICAgICAgIHN0YXIucGFyZW50ID0gY2FudmFzTm9kZTtcbiAgICAgICAgICAgIHN0YXIuekluZGV4ID0gOTk5O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxQb3MgPSBjYW52YXNOb2RlLmNvbnZlcnRUb05vZGVTcGFjZUFSKHdvcmxkUG9zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6ZqP5py65L2N572u5YGP56e7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRYID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMTAwO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMDtcbiAgICAgICAgICAgIHN0YXIuc2V0UG9zaXRpb24obG9jYWxQb3MueCArIG9mZnNldFgsIGxvY2FsUG9zLnkgKyBvZmZzZXRZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6I635Y+W55uu5qCH5pif5pif5pS26ZuG54K5XG4gICAgICAgICAgICBjb25zdCBzdGFyTm9kZSA9IGNjLmZpbmQoJ0NhbnZhcy9nYW1lL3N0YXJDb2xsZWN0L3N0YXInKTtcbiAgICAgICAgICAgIGlmICghc3Rhck5vZGUpIHtcbiAgICAgICAgICAgICAgICBjYy5lcnJvcign5om+5LiN5Yiwc3RhciBub2Rl77yBJyk7XG4gICAgICAgICAgICAgICAgc3Rhci5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB3b3JsZFRhcmdldFBvcyA9IHN0YXJOb2RlLmdldFBvc2l0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vIOWKoOi9veW5tuaSreaUvuaUtumbhumfs+aViFxuICAgICAgICAgICAgY2MucmVzb3VyY2VzLmxvYWQoJ2F1ZGlvcy9jb2xsZWN0JywgY2MuQXVkaW9DbGlwLCAoZXJyLCBhdWRpb0NsaXApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNjLmVycm9yKCfliqDovb3mlLbpm4bpn7PmlYjlpLHotKU6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5RWZmZWN0KGF1ZGlvQ2xpcCwgZmFsc2UsIDMuMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWIm+W7uumjnuWQkeebruagh+eahOWKqOS9nFxuICAgICAgICAgICAgY29uc3QgbW92ZUFjdGlvbiA9IGNjLnNlcXVlbmNlKFxuICAgICAgICAgICAgICAgIGNjLm1vdmVUbygwLjUsIHdvcmxkVGFyZ2V0UG9zKS5lYXNpbmcoY2MuZWFzZUJhY2tJbigpKSxcbiAgICAgICAgICAgICAgICBjYy5jYWxsRnVuYygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOmAmuefpUdhbWVNYW5hZ2Vy5aKe5Yqg5pif5pif5pWw6YePXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU1hbmFnZXIuYWRkU3RhcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgc3Rhci5ydW5BY3Rpb24obW92ZUFjdGlvbik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzRHlpbmcpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIC8vIOiOt+WPlueOqeWutuiKgueCuVxuICAgICAgICBsZXQgcGxheWVyID0gY2MuZmluZCgnQ2FudmFzL2dhbWUvcGxheWVyJyk7XG4gICAgICAgIGlmICghcGxheWVyKSB7XG4gICAgICAgICAgICBjYy53YXJuKCfmib7kuI3liLDnjqnlrrboioLngrnvvIHor7fnoa7kv53lnLrmma/kuK3njqnlrrboioLngrnnmoTot6/lvoTmmK8gQ2FudmFzL2dhbWUvcGxheWVyJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOiOt+WPluS4lueVjOWdkOagh+S4i+eahOS9jee9rlxuICAgICAgICBsZXQgbW9uc3RlclBvcyA9IHRoaXMubm9kZS5wYXJlbnQuY29udmVydFRvV29ybGRTcGFjZUFSKHRoaXMubm9kZS5wb3NpdGlvbik7XG4gICAgICAgIGxldCBwbGF5ZXJQb3MgPSBwbGF5ZXIucGFyZW50LmNvbnZlcnRUb1dvcmxkU3BhY2VBUihwbGF5ZXIucG9zaXRpb24pO1xuICAgICAgICBcbiAgICAgICAgLy8g6K6h566X5LiO546p5a6255qE6Led56a7XG4gICAgICAgIGxldCBkaXN0YW5jZSA9IGNjLlZlYzIuZGlzdGFuY2UoXG4gICAgICAgICAgICBjYy52Mihtb25zdGVyUG9zLngsIG1vbnN0ZXJQb3MueSksXG4gICAgICAgICAgICBjYy52MihwbGF5ZXJQb3MueCwgcGxheWVyUG9zLnkpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyDmt7vliqDosIPor5Xml6Xlv5dcbiAgICAgICAgY2MubG9nKCfmgKrniankvY3nva46JywgbW9uc3RlclBvcywgJ+eOqeWutuS9jee9rjonLCBwbGF5ZXJQb3MsICfot53nprs6JywgZGlzdGFuY2UsICfmo4DmtYvojIPlm7Q6JywgdGhpcy5kZXRlY3Rpb25SYWRpdXMpO1xuICAgICAgICBcbiAgICAgICAgLy8g5Zyo5qOA5rWL6IyD5Zu05YaFXG4gICAgICAgIGlmIChkaXN0YW5jZSA8IHRoaXMuZGV0ZWN0aW9uUmFkaXVzKSB7XG4gICAgICAgICAgICAvLyDov73ouKrnjqnlrrZcbiAgICAgICAgICAgIGxldCBkaXJlY3Rpb24gPSBjYy52MihcbiAgICAgICAgICAgICAgICBwbGF5ZXJQb3MueCAtIG1vbnN0ZXJQb3MueCxcbiAgICAgICAgICAgICAgICBwbGF5ZXJQb3MueSAtIG1vbnN0ZXJQb3MueVxuICAgICAgICAgICAgKS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5ID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5SaWdpZEJvZHkpLmxpbmVhclZlbG9jaXR5O1xuICAgICAgICAgICAgdmVsb2NpdHkueCA9IGRpcmVjdGlvbi54ICogdGhpcy5tb3ZlU3BlZWQ7XG4gICAgICAgICAgICB2ZWxvY2l0eS55ID0gZGlyZWN0aW9uLnkgKiB0aGlzLm1vdmVTcGVlZDtcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuUmlnaWRCb2R5KS5saW5lYXJWZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYy5sb2coJ+aAqueJqeato+WcqOenu+WKqO+8jOmAn+W6pjonLCB2ZWxvY2l0eSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWPkeWwhOeCuOW8uVxuICAgICAgICAgICAgdGhpcy5zaG9vdEJvbWIocGxheWVyLnBvc2l0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOWBnOatouenu+WKqFxuICAgICAgICAgICAgbGV0IHZlbG9jaXR5ID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5SaWdpZEJvZHkpLmxpbmVhclZlbG9jaXR5O1xuICAgICAgICAgICAgdmVsb2NpdHkueCA9IDA7XG4gICAgICAgICAgICB2ZWxvY2l0eS55ID0gMDtcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuUmlnaWRCb2R5KS5saW5lYXJWZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgICAgICAgICAgY2MubG9nKCfmgKrnianlgZzmraLnp7vliqjvvIzotoXlh7rmo4DmtYvojIPlm7QnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgc2hvb3RCb21iKHRhcmdldFBvcykge1xuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IGNjLmRpcmVjdG9yLmdldFRvdGFsVGltZSgpIC8gMTAwMDtcbiAgICAgICAgXG4gICAgICAgIGNjLmxvZygn5bCd6K+V5Y+R5bCE54K45by5IC0g5b2T5YmN5pe26Ze0OicsIGN1cnJlbnRUaW1lLCBcbiAgICAgICAgICAgICAgICfkuIrmrKHlj5HlsITml7bpl7Q6JywgdGhpcy5sYXN0U2hvb3RUaW1lLCBcbiAgICAgICAgICAgICAgICflj5HlsITpl7TpmpQ6JywgdGhpcy5zaG9vdEludGVydmFsLFxuICAgICAgICAgICAgICAgJ+aYr+WQpuWPr+S7peWPkeWwhDonLCAoY3VycmVudFRpbWUgLSB0aGlzLmxhc3RTaG9vdFRpbWUgPj0gdGhpcy5zaG9vdEludGVydmFsKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY3VycmVudFRpbWUgLSB0aGlzLmxhc3RTaG9vdFRpbWUgPCB0aGlzLnNob290SW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLmJvbWJQcmVmYWIpIHtcbiAgICAgICAgICAgIGNjLmVycm9yKCfngrjlvLnpooTliLbkvZPmnKrorr7nva7vvIHor7flnKjnvJbovpHlmajkuK3orr7nva4gTW9uc3RlciDnu4Tku7bnmoQgQm9tYiBQcmVmYWIg5bGe5oCnJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubGFzdFNob290VGltZSA9IGN1cnJlbnRUaW1lO1xuICAgICAgICBcbiAgICAgICAgLy8g5Yib5bu654K45by5XG4gICAgICAgIGxldCBib21iID0gY2MuaW5zdGFudGlhdGUodGhpcy5ib21iUHJlZmFiKTtcbiAgICAgICAgaWYgKCFib21iKSB7XG4gICAgICAgICAgICBjYy5lcnJvcign54K45by56aKE5Yi25L2T5a6e5L6L5YyW5aSx6LSl77yBJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9rueCuOW8ueS9jee9ruS4uuaAqueJqeW9k+WJjeS9jee9rlxuICAgICAgICBib21iLnNldFBvc2l0aW9uKHRoaXMubm9kZS5wb3NpdGlvbik7XG4gICAgICAgIHRoaXMubm9kZS5wYXJlbnQuYWRkQ2hpbGQoYm9tYik7XG4gICAgICAgIFxuICAgICAgICAvLyDorqHnrpfmlrnlkJHvvIjkvb/nlKjmnKzlnLDlnZDmoIfvvIlcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHRhcmdldFBvcy5zdWIodGhpcy5ub2RlLnBvc2l0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9rueCuOW8ueWxnuaAp1xuICAgICAgICBsZXQgYm9tYkNvbXAgPSBib21iLmdldENvbXBvbmVudCgnQm9tYicpO1xuICAgICAgICBpZiAoYm9tYkNvbXApIHtcbiAgICAgICAgICAgIGJvbWJDb21wLnNldERpcmVjdGlvbihkaXJlY3Rpb24pO1xuICAgICAgICAgICAgYm9tYkNvbXAuc2V0U3BlZWQoMzAwKTsgLy8g5aKe5Yqg6YCf5bqm5L2/54K45by556e75Yqo5pu05piO5pi+XG4gICAgICAgICAgICBib21iQ29tcC5zZXREYW1hZ2UoMjApO1xuICAgICAgICAgICAgY2MubG9nKCfngrjlvLnlt7Llj5HlsITvvIHmlrnlkJE6JywgZGlyZWN0aW9uLCAn55uu5qCH5L2N572uOicsIHRhcmdldFBvcywgJ+W9k+WJjeS9jee9rjonLCB0aGlzLm5vZGUucG9zaXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2MuZXJyb3IoJ+eCuOW8ueayoeaciUJvbWLnu4Tku7bvvIHor7fnoa7kv53ngrjlvLnpooTliLbkvZPlt7Lmt7vliqAgQm9tYiDnu4Tku7YnKTtcbiAgICAgICAgICAgIGJvbWIuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iXX0=