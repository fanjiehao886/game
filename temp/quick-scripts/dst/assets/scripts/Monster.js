
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Monster.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9d5a02WiMxF572qa+T4fVyu', 'Monster');
// scripts/Monster.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    maxHealth: {
      "default": 100,
      type: cc.Integer,
      tooltip: '怪物最大生命值'
    },
    collectAudio: {
      "default": null,
      type: cc.AudioClip,
      tooltip: '收集星星的音效'
    },
    currentHealth: {
      "default": 100,
      type: cc.Integer,
      tooltip: '怪物当前生命值'
    },
    healthBar: {
      "default": null,
      type: cc.Node,
      tooltip: '血条节点'
    },
    hitAudio: {
      "default": null,
      type: cc.AudioClip,
      tooltip: '受击音效'
    },
    deathAudio: {
      "default": null,
      type: cc.AudioClip,
      tooltip: '死亡音效'
    },
    bombPrefab: {
      "default": null,
      type: cc.Prefab,
      tooltip: '炸弹预制体'
    },
    starPrefab: {
      "default": null,
      type: cc.Prefab,
      tooltip: '星星预制体'
    },
    detectionRadius: {
      "default": 300,
      type: cc.Float,
      tooltip: '检测玩家的范围'
    },
    moveSpeed: {
      "default": 50,
      type: cc.Float,
      tooltip: '移动速度'
    },
    shootInterval: {
      "default": 2.0,
      type: cc.Float,
      tooltip: '发射间隔'
    }
  },
  onLoad: function onLoad() {
    this.currentHealth = this.maxHealth;
    this.lastShootTime = 0; // 确保初始化射击时间
    // 检查是否有炸弹预制体

    if (!this.bombPrefab) {
      cc.error('未设置炸弹预制体！');
    } // 确保有碰撞组件


    var collider = this.getComponent(cc.BoxCollider);

    if (!collider) {
      collider = this.addComponent(cc.BoxCollider);
      collider.size.width = this.node.width;
      collider.size.height = this.node.height;
    } // 设置碰撞组


    this.node.group = 'monster'; // 获取血条中的 Bar 节点

    if (this.healthBar) {
      this.barNode = this.healthBar.getChildByName('Bar');

      if (!this.barNode) {
        cc.error('找不到 Bar 节点！');
        return;
      } // 保存初始宽度


      this.originalBarWidth = this.barNode.width;
      cc.log('血条初始宽度：', this.originalBarWidth);
    } else {
      cc.error('未设置血条节点！');
    } // 添加死亡标记


    this.isDying = false; // 添加刚体组件

    var rigidBody = this.getComponent(cc.RigidBody);

    if (!rigidBody) {
      rigidBody = this.addComponent(cc.RigidBody);
      rigidBody.type = cc.RigidBodyType.Dynamic;
      rigidBody.fixedRotation = true;
    }
  },
  createHealthBar: function createHealthBar() {
    // 创建血条节点
    var healthBarNode = new cc.Node('HealthBar');
    this.node.addChild(healthBarNode);
    healthBarNode.zIndex = 1; // 创建背景条

    var barBgNode = new cc.Node('BarBg');
    healthBarNode.addChild(barBgNode);
    var barBgSprite = barBgNode.addComponent(cc.Sprite);
    barBgSprite.color = cc.Color.RED; // 创建血量条

    var barNode = new cc.Node('Bar');
    healthBarNode.addChild(barNode);
    var barSprite = barNode.addComponent(cc.Sprite);
    barSprite.color = cc.Color.GREEN; // 设置血条尺寸和位置

    healthBarNode.width = 100;
    healthBarNode.height = 10;
    barBgNode.width = 100;
    barBgNode.height = 10;
    barNode.width = 100;
    barNode.height = 10; // 将血条放在怪物上方

    healthBarNode.setPosition(0, this.node.height / 2 + 10); // 保存引用

    this.healthBar = healthBarNode;
    this.healthBarBg = barBgNode;
  },
  start: function start() {
    this.updateHealthBar();
  },
  takeDamage: function takeDamage(damage) {
    // 如果已经在死亡过程中，不再处理伤害
    if (this.isDying) return;
    if (typeof damage !== 'number' || damage <= 0) return; // 使用 playEffect 播放音效

    if (this.hitAudio) {
      cc.audioEngine.playEffect(this.hitAudio, false, 0.3);
    } // 减少生命值


    this.currentHealth = Math.max(0, this.currentHealth - damage); // 更新血条显示

    if (this.barNode && this.originalBarWidth) {
      var healthPercentage = this.currentHealth / this.maxHealth;
      this.barNode.width = this.originalBarWidth * healthPercentage;
    }

    cc.log('怪物受到伤害:', damage, '当前生命值:', this.currentHealth); // 检查是否死亡

    if (this.currentHealth <= 0 && !this.isDying) {
      this.die();
    }
  },
  updateHealthBar: function updateHealthBar() {
    if (this.healthBar) {
      var healthPercentage = this.currentHealth / this.maxHealth;
      this.healthBar.width = 100 * healthPercentage;
    }
  },
  die: function die() {
    var _this = this;

    // 设置死亡标记
    if (this.isDying) return;
    this.isDying = true; // 使用 playEffect 播放音效

    if (this.deathAudio) {
      var audioId = cc.audioEngine.playEffect(this.deathAudio, false, 0.3);
      cc.audioEngine.setFinishCallback(audioId, function () {
        _this.node.destroy();
      });
    } else {
      this.node.destroy();
    } // 生成星星


    this.spawnStars(3);
  },
  spawnStars: function spawnStars(count) {
    var _this2 = this;

    if (!this.starPrefab) {
      cc.error('星星预制体未设置!');
      return;
    }

    var canvasNode = cc.find('Canvas');
    var worldPos = this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);
    var gameManager = canvasNode.getComponent('GameManager');

    var _loop = function _loop(i) {
      var star = cc.instantiate(_this2.starPrefab);
      star.parent = canvasNode;
      star.zIndex = 999;
      var localPos = canvasNode.convertToNodeSpaceAR(worldPos); // 随机位置偏移

      var offsetX = (Math.random() - 0.5) * 100;
      var offsetY = (Math.random() - 0.5) * 100;
      star.setPosition(localPos.x + offsetX, localPos.y + offsetY); // 添加点击组件

      var button = star.addComponent(cc.Button); // 添加碰撞组件以便于点击

      var collider = star.addComponent(cc.BoxCollider);
      collider.size = star.getContentSize(); // 添加点击事件

      var self = _this2; // 保存Monster实例的引用

      button.node.on('click', function () {
        // 禁用按钮防止多次点击
        button.interactable = false; // 获取场景中的star node位置

        var starNode = cc.find('Canvas/game/starCollect/star');

        if (!starNode) {
          cc.error('找不到star node！');
          return;
        }

        var worldTargetPos = starNode.getPosition(); // 加载并播放收集音效

        cc.resources.load('audios/collect', cc.AudioClip, function (err, audioClip) {
          if (err) {
            cc.error('加载收集音效失败:', err);
            return;
          }

          cc.audioEngine.playEffect(audioClip, false, 3.0);
        }); // 创建飞向目标的动作

        var moveAction = cc.sequence(cc.moveTo(0.5, worldTargetPos).easing(cc.easeBackIn()), cc.callFunc(function () {
          // 通知GameManager增加星星数量
          if (gameManager) {
            gameManager.addStar();
          }

          star.destroy();
        }));
        star.runAction(moveAction);
      });
    };

    for (var i = 0; i < count; i++) {
      _loop(i);
    }
  },
  update: function update(dt) {
    if (this.isDying) return; // 获取玩家节点

    var player = cc.find('Canvas/game/player');

    if (!player) {
      cc.warn('找不到玩家节点！请确保场景中玩家节点的路径是 Canvas/game/player');
      return;
    } // 获取世界坐标下的位置


    var monsterPos = this.node.parent.convertToWorldSpaceAR(this.node.position);
    var playerPos = player.parent.convertToWorldSpaceAR(player.position); // 计算与玩家的距离

    var distance = cc.Vec2.distance(cc.v2(monsterPos.x, monsterPos.y), cc.v2(playerPos.x, playerPos.y)); // 添加调试日志

    cc.log('怪物位置:', monsterPos, '玩家位置:', playerPos, '距离:', distance, '检测范围:', this.detectionRadius); // 在检测范围内

    if (distance < this.detectionRadius) {
      // 追踪玩家
      var direction = cc.v2(playerPos.x - monsterPos.x, playerPos.y - monsterPos.y).normalize();
      var velocity = this.node.getComponent(cc.RigidBody).linearVelocity;
      velocity.x = direction.x * this.moveSpeed;
      velocity.y = direction.y * this.moveSpeed;
      this.node.getComponent(cc.RigidBody).linearVelocity = velocity;
      cc.log('怪物正在移动，速度:', velocity); // 发射炸弹

      this.shootBomb(player.position);
    } else {
      // 停止移动
      var _velocity = this.node.getComponent(cc.RigidBody).linearVelocity;
      _velocity.x = 0;
      _velocity.y = 0;
      this.node.getComponent(cc.RigidBody).linearVelocity = _velocity;
      cc.log('怪物停止移动，超出检测范围');
    }
  },
  shootBomb: function shootBomb(targetPos) {
    var currentTime = cc.director.getTotalTime() / 1000;
    cc.log('尝试发射炸弹 - 当前时间:', currentTime, '上次发射时间:', this.lastShootTime, '发射间隔:', this.shootInterval, '是否可以发射:', currentTime - this.lastShootTime >= this.shootInterval);

    if (currentTime - this.lastShootTime < this.shootInterval) {
      return;
    }

    if (!this.bombPrefab) {
      cc.error('炸弹预制体未设置！请在编辑器中设置 Monster 组件的 Bomb Prefab 属性');
      return;
    }

    this.lastShootTime = currentTime; // 创建炸弹

    var bomb = cc.instantiate(this.bombPrefab);

    if (!bomb) {
      cc.error('炸弹预制体实例化失败！');
      return;
    } // 设置炸弹位置为怪物当前位置


    bomb.setPosition(this.node.position);
    this.node.parent.addChild(bomb); // 计算方向（使用本地坐标）

    var direction = targetPos.sub(this.node.position); // 设置炸弹属性

    var bombComp = bomb.getComponent('Bomb');

    if (bombComp) {
      bombComp.setDirection(direction);
      bombComp.setSpeed(300); // 增加速度使炸弹移动更明显

      bombComp.setDamage(20);
      cc.log('炸弹已发射！方向:', direction, '目标位置:', targetPos, '当前位置:', this.node.position);
    } else {
      cc.error('炸弹没有Bomb组件！请确保炸弹预制体已添加 Bomb 组件');
      bomb.destroy();
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL01vbnN0ZXIuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJtYXhIZWFsdGgiLCJ0eXBlIiwiSW50ZWdlciIsInRvb2x0aXAiLCJjb2xsZWN0QXVkaW8iLCJBdWRpb0NsaXAiLCJjdXJyZW50SGVhbHRoIiwiaGVhbHRoQmFyIiwiTm9kZSIsImhpdEF1ZGlvIiwiZGVhdGhBdWRpbyIsImJvbWJQcmVmYWIiLCJQcmVmYWIiLCJzdGFyUHJlZmFiIiwiZGV0ZWN0aW9uUmFkaXVzIiwiRmxvYXQiLCJtb3ZlU3BlZWQiLCJzaG9vdEludGVydmFsIiwib25Mb2FkIiwibGFzdFNob290VGltZSIsImVycm9yIiwiY29sbGlkZXIiLCJnZXRDb21wb25lbnQiLCJCb3hDb2xsaWRlciIsImFkZENvbXBvbmVudCIsInNpemUiLCJ3aWR0aCIsIm5vZGUiLCJoZWlnaHQiLCJncm91cCIsImJhck5vZGUiLCJnZXRDaGlsZEJ5TmFtZSIsIm9yaWdpbmFsQmFyV2lkdGgiLCJsb2ciLCJpc0R5aW5nIiwicmlnaWRCb2R5IiwiUmlnaWRCb2R5IiwiUmlnaWRCb2R5VHlwZSIsIkR5bmFtaWMiLCJmaXhlZFJvdGF0aW9uIiwiY3JlYXRlSGVhbHRoQmFyIiwiaGVhbHRoQmFyTm9kZSIsImFkZENoaWxkIiwiekluZGV4IiwiYmFyQmdOb2RlIiwiYmFyQmdTcHJpdGUiLCJTcHJpdGUiLCJjb2xvciIsIkNvbG9yIiwiUkVEIiwiYmFyU3ByaXRlIiwiR1JFRU4iLCJzZXRQb3NpdGlvbiIsImhlYWx0aEJhckJnIiwic3RhcnQiLCJ1cGRhdGVIZWFsdGhCYXIiLCJ0YWtlRGFtYWdlIiwiZGFtYWdlIiwiYXVkaW9FbmdpbmUiLCJwbGF5RWZmZWN0IiwiTWF0aCIsIm1heCIsImhlYWx0aFBlcmNlbnRhZ2UiLCJkaWUiLCJhdWRpb0lkIiwic2V0RmluaXNoQ2FsbGJhY2siLCJkZXN0cm95Iiwic3Bhd25TdGFycyIsImNvdW50IiwiY2FudmFzTm9kZSIsImZpbmQiLCJ3b3JsZFBvcyIsImNvbnZlcnRUb1dvcmxkU3BhY2VBUiIsIlZlYzIiLCJaRVJPIiwiZ2FtZU1hbmFnZXIiLCJpIiwic3RhciIsImluc3RhbnRpYXRlIiwicGFyZW50IiwibG9jYWxQb3MiLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsIm9mZnNldFgiLCJyYW5kb20iLCJvZmZzZXRZIiwieCIsInkiLCJidXR0b24iLCJCdXR0b24iLCJnZXRDb250ZW50U2l6ZSIsInNlbGYiLCJvbiIsImludGVyYWN0YWJsZSIsInN0YXJOb2RlIiwid29ybGRUYXJnZXRQb3MiLCJnZXRQb3NpdGlvbiIsInJlc291cmNlcyIsImxvYWQiLCJlcnIiLCJhdWRpb0NsaXAiLCJtb3ZlQWN0aW9uIiwic2VxdWVuY2UiLCJtb3ZlVG8iLCJlYXNpbmciLCJlYXNlQmFja0luIiwiY2FsbEZ1bmMiLCJhZGRTdGFyIiwicnVuQWN0aW9uIiwidXBkYXRlIiwiZHQiLCJwbGF5ZXIiLCJ3YXJuIiwibW9uc3RlclBvcyIsInBvc2l0aW9uIiwicGxheWVyUG9zIiwiZGlzdGFuY2UiLCJ2MiIsImRpcmVjdGlvbiIsIm5vcm1hbGl6ZSIsInZlbG9jaXR5IiwibGluZWFyVmVsb2NpdHkiLCJzaG9vdEJvbWIiLCJ0YXJnZXRQb3MiLCJjdXJyZW50VGltZSIsImRpcmVjdG9yIiwiZ2V0VG90YWxUaW1lIiwiYm9tYiIsInN1YiIsImJvbWJDb21wIiwic2V0RGlyZWN0aW9uIiwic2V0U3BlZWQiLCJzZXREYW1hZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0VBQ0wsV0FBU0QsRUFBRSxDQUFDRSxTQURQO0VBR0xDLFVBQVUsRUFBRTtJQUNSQyxTQUFTLEVBQUU7TUFDUCxXQUFTLEdBREY7TUFFUEMsSUFBSSxFQUFFTCxFQUFFLENBQUNNLE9BRkY7TUFHUEMsT0FBTyxFQUFFO0lBSEYsQ0FESDtJQU1SQyxZQUFZLEVBQUU7TUFDVixXQUFTLElBREM7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QUtwRyxJQUFMLENBQVVzRixRQUF4QixDQUFoQixDQS9CaUIsQ0FpQ2pCOztJQUNBLElBQUllLFFBQVEsR0FBR0YsSUFBSSxDQUFDeEcsWUFBTCxDQUFrQixNQUFsQixDQUFmOztJQUNBLElBQUkwRyxRQUFKLEVBQWM7TUFDVkEsUUFBUSxDQUFDQyxZQUFULENBQXNCWixTQUF0QjtNQUNBVyxRQUFRLENBQUNFLFFBQVQsQ0FBa0IsR0FBbEIsRUFGVSxDQUVjOztNQUN4QkYsUUFBUSxDQUFDRyxTQUFULENBQW1CLEVBQW5CO01BQ0F2SSxFQUFFLENBQUNxQyxHQUFILENBQU8sV0FBUCxFQUFvQm9GLFNBQXBCLEVBQStCLE9BQS9CLEVBQXdDSyxTQUF4QyxFQUFtRCxPQUFuRCxFQUE0RCxLQUFLL0YsSUFBTCxDQUFVc0YsUUFBdEU7SUFDSCxDQUxELE1BS087TUFDSHJILEVBQUUsQ0FBQ3dCLEtBQUgsQ0FBUyxnQ0FBVDtNQUNBMEcsSUFBSSxDQUFDNUQsT0FBTDtJQUNIO0VBQ0o7QUF2V0ksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiBcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIG1heEhlYWx0aDoge1xuICAgICAgICAgICAgZGVmYXVsdDogMTAwLFxuICAgICAgICAgICAgdHlwZTogY2MuSW50ZWdlcixcbiAgICAgICAgICAgIHRvb2x0aXA6ICfmgKrnianmnIDlpKfnlJ/lkb3lgLwnXG4gICAgICAgIH0sXG4gICAgICAgIGNvbGxlY3RBdWRpbzoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvQ2xpcCxcbiAgICAgICAgICAgIHRvb2x0aXA6ICfmlLbpm4bmmJ/mmJ/nmoTpn7PmlYgnXG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRIZWFsdGg6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IDEwMCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkludGVnZXIsXG4gICAgICAgICAgICB0b29sdGlwOiAn5oCq54mp5b2T5YmN55Sf5ZG95YC8J1xuICAgICAgICB9LFxuICAgICAgICBoZWFsdGhCYXI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlLFxuICAgICAgICAgICAgdG9vbHRpcDogJ+ihgOadoeiKgueCuSdcbiAgICAgICAgfSxcbiAgICAgICAgaGl0QXVkaW86IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXAsXG4gICAgICAgICAgICB0b29sdGlwOiAn5Y+X5Ye76Z+z5pWIJ1xuICAgICAgICB9LFxuICAgICAgICBkZWF0aEF1ZGlvOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuQXVkaW9DbGlwLFxuICAgICAgICAgICAgdG9vbHRpcDogJ+atu+S6oemfs+aViCdcbiAgICAgICAgfSxcbiAgICAgICAgYm9tYlByZWZhYjoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLlByZWZhYixcbiAgICAgICAgICAgIHRvb2x0aXA6ICfngrjlvLnpooTliLbkvZMnXG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJQcmVmYWI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWIsXG4gICAgICAgICAgICB0b29sdGlwOiAn5pif5pif6aKE5Yi25L2TJ1xuICAgICAgICB9LFxuICAgICAgICBkZXRlY3Rpb25SYWRpdXM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IDMwMCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkZsb2F0LFxuICAgICAgICAgICAgdG9vbHRpcDogJ+ajgOa1i+eOqeWutueahOiMg+WbtCdcbiAgICAgICAgfSxcbiAgICAgICAgbW92ZVNwZWVkOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiA1MCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkZsb2F0LFxuICAgICAgICAgICAgdG9vbHRpcDogJ+enu+WKqOmAn+W6pidcbiAgICAgICAgfSxcbiAgICAgICAgc2hvb3RJbnRlcnZhbDoge1xuICAgICAgICAgICAgZGVmYXVsdDogMi4wLFxuICAgICAgICAgICAgdHlwZTogY2MuRmxvYXQsXG4gICAgICAgICAgICB0b29sdGlwOiAn5Y+R5bCE6Ze06ZqUJ1xuICAgICAgICB9XG4gICAgfSxcbiBcbiAgICBvbkxvYWQoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEhlYWx0aCA9IHRoaXMubWF4SGVhbHRoO1xuICAgICAgICB0aGlzLmxhc3RTaG9vdFRpbWUgPSAwOyAvLyDnoa7kv53liJ3lp4vljJblsITlh7vml7bpl7RcbiAgICAgICAgXG4gICAgICAgIC8vIOajgOafpeaYr+WQpuacieeCuOW8uemihOWItuS9k1xuICAgICAgICBpZiAoIXRoaXMuYm9tYlByZWZhYikge1xuICAgICAgICAgICAgY2MuZXJyb3IoJ+acquiuvue9rueCuOW8uemihOWItuS9k++8gScpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDnoa7kv53mnInnorDmkp7nu4Tku7ZcbiAgICAgICAgbGV0IGNvbGxpZGVyID0gdGhpcy5nZXRDb21wb25lbnQoY2MuQm94Q29sbGlkZXIpO1xuICAgICAgICBpZiAoIWNvbGxpZGVyKSB7XG4gICAgICAgICAgICBjb2xsaWRlciA9IHRoaXMuYWRkQ29tcG9uZW50KGNjLkJveENvbGxpZGVyKTtcbiAgICAgICAgICAgIGNvbGxpZGVyLnNpemUud2lkdGggPSB0aGlzLm5vZGUud2lkdGg7XG4gICAgICAgICAgICBjb2xsaWRlci5zaXplLmhlaWdodCA9IHRoaXMubm9kZS5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8g6K6+572u56Kw5pKe57uEXG4gICAgICAgIHRoaXMubm9kZS5ncm91cCA9ICdtb25zdGVyJztcbiBcbiAgICAgICAgLy8g6I635Y+W6KGA5p2h5Lit55qEIEJhciDoioLngrlcbiAgICAgICAgaWYgKHRoaXMuaGVhbHRoQmFyKSB7XG4gICAgICAgICAgICB0aGlzLmJhck5vZGUgPSB0aGlzLmhlYWx0aEJhci5nZXRDaGlsZEJ5TmFtZSgnQmFyJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYmFyTm9kZSkge1xuICAgICAgICAgICAgICAgIGNjLmVycm9yKCfmib7kuI3liLAgQmFyIOiKgueCue+8gScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOS/neWtmOWIneWni+WuveW6plxuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbEJhcldpZHRoID0gdGhpcy5iYXJOb2RlLndpZHRoO1xuICAgICAgICAgICAgY2MubG9nKCfooYDmnaHliJ3lp4vlrr3luqbvvJonLCB0aGlzLm9yaWdpbmFsQmFyV2lkdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2MuZXJyb3IoJ+acquiuvue9ruihgOadoeiKgueCue+8gScpO1xuICAgICAgICB9XG4gXG4gICAgICAgIC8vIOa3u+WKoOatu+S6oeagh+iusFxuICAgICAgICB0aGlzLmlzRHlpbmcgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIOa3u+WKoOWImuS9k+e7hOS7tlxuICAgICAgICBsZXQgcmlnaWRCb2R5ID0gdGhpcy5nZXRDb21wb25lbnQoY2MuUmlnaWRCb2R5KTtcbiAgICAgICAgaWYgKCFyaWdpZEJvZHkpIHtcbiAgICAgICAgICAgIHJpZ2lkQm9keSA9IHRoaXMuYWRkQ29tcG9uZW50KGNjLlJpZ2lkQm9keSk7XG4gICAgICAgICAgICByaWdpZEJvZHkudHlwZSA9IGNjLlJpZ2lkQm9keVR5cGUuRHluYW1pYztcbiAgICAgICAgICAgIHJpZ2lkQm9keS5maXhlZFJvdGF0aW9uID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gXG4gICAgY3JlYXRlSGVhbHRoQmFyKCkge1xuICAgICAgICAvLyDliJvlu7rooYDmnaHoioLngrlcbiAgICAgICAgbGV0IGhlYWx0aEJhck5vZGUgPSBuZXcgY2MuTm9kZSgnSGVhbHRoQmFyJyk7XG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChoZWFsdGhCYXJOb2RlKTtcbiAgICAgICAgaGVhbHRoQmFyTm9kZS56SW5kZXggPSAxO1xuICAgICAgICBcbiAgICAgICAgLy8g5Yib5bu66IOM5pmv5p2hXG4gICAgICAgIGxldCBiYXJCZ05vZGUgPSBuZXcgY2MuTm9kZSgnQmFyQmcnKTtcbiAgICAgICAgaGVhbHRoQmFyTm9kZS5hZGRDaGlsZChiYXJCZ05vZGUpO1xuICAgICAgICBsZXQgYmFyQmdTcHJpdGUgPSBiYXJCZ05vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XG4gICAgICAgIGJhckJnU3ByaXRlLmNvbG9yID0gY2MuQ29sb3IuUkVEO1xuICAgICAgICBcbiAgICAgICAgLy8g5Yib5bu66KGA6YeP5p2hXG4gICAgICAgIGxldCBiYXJOb2RlID0gbmV3IGNjLk5vZGUoJ0JhcicpO1xuICAgICAgICBoZWFsdGhCYXJOb2RlLmFkZENoaWxkKGJhck5vZGUpO1xuICAgICAgICBsZXQgYmFyU3ByaXRlID0gYmFyTm9kZS5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcbiAgICAgICAgYmFyU3ByaXRlLmNvbG9yID0gY2MuQ29sb3IuR1JFRU47XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7ooYDmnaHlsLrlr7jlkozkvY3nva5cbiAgICAgICAgaGVhbHRoQmFyTm9kZS53aWR0aCA9IDEwMDtcbiAgICAgICAgaGVhbHRoQmFyTm9kZS5oZWlnaHQgPSAxMDtcbiAgICAgICAgYmFyQmdOb2RlLndpZHRoID0gMTAwO1xuICAgICAgICBiYXJCZ05vZGUuaGVpZ2h0ID0gMTA7XG4gICAgICAgIGJhck5vZGUud2lkdGggPSAxMDA7XG4gICAgICAgIGJhck5vZGUuaGVpZ2h0ID0gMTA7XG4gICAgICAgIFxuICAgICAgICAvLyDlsIbooYDmnaHmlL7lnKjmgKrniankuIrmlrlcbiAgICAgICAgaGVhbHRoQmFyTm9kZS5zZXRQb3NpdGlvbigwLCB0aGlzLm5vZGUuaGVpZ2h0IC8gMiArIDEwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOS/neWtmOW8leeUqFxuICAgICAgICB0aGlzLmhlYWx0aEJhciA9IGhlYWx0aEJhck5vZGU7XG4gICAgICAgIHRoaXMuaGVhbHRoQmFyQmcgPSBiYXJCZ05vZGU7XG4gICAgfSxcbiBcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVIZWFsdGhCYXIoKTtcbiAgICB9LFxuIFxuICAgIHRha2VEYW1hZ2UoZGFtYWdlKSB7XG4gICAgICAgIC8vIOWmguaenOW3sue7j+WcqOatu+S6oei/h+eoi+S4re+8jOS4jeWGjeWkhOeQhuS8pOWus1xuICAgICAgICBpZiAodGhpcy5pc0R5aW5nKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZW9mIGRhbWFnZSAhPT0gJ251bWJlcicgfHwgZGFtYWdlIDw9IDApIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIC8vIOS9v+eUqCBwbGF5RWZmZWN0IOaSreaUvumfs+aViFxuICAgICAgICBpZiAodGhpcy5oaXRBdWRpbykge1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheUVmZmVjdCh0aGlzLmhpdEF1ZGlvLCBmYWxzZSwgMC4zKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5YeP5bCR55Sf5ZG95YC8XG4gICAgICAgIHRoaXMuY3VycmVudEhlYWx0aCA9IE1hdGgubWF4KDAsIHRoaXMuY3VycmVudEhlYWx0aCAtIGRhbWFnZSk7XG4gICAgICAgIFxuICAgICAgICAvLyDmm7TmlrDooYDmnaHmmL7npLpcbiAgICAgICAgaWYgKHRoaXMuYmFyTm9kZSAmJiB0aGlzLm9yaWdpbmFsQmFyV2lkdGgpIHtcbiAgICAgICAgICAgIGxldCBoZWFsdGhQZXJjZW50YWdlID0gdGhpcy5jdXJyZW50SGVhbHRoIC8gdGhpcy5tYXhIZWFsdGg7XG4gICAgICAgICAgICB0aGlzLmJhck5vZGUud2lkdGggPSB0aGlzLm9yaWdpbmFsQmFyV2lkdGggKiBoZWFsdGhQZXJjZW50YWdlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjYy5sb2coJ+aAqueJqeWPl+WIsOS8pOWuszonLCBkYW1hZ2UsICflvZPliY3nlJ/lkb3lgLw6JywgdGhpcy5jdXJyZW50SGVhbHRoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOajgOafpeaYr+WQpuatu+S6oVxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SGVhbHRoIDw9IDAgJiYgIXRoaXMuaXNEeWluZykge1xuICAgICAgICAgICAgdGhpcy5kaWUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gXG4gICAgdXBkYXRlSGVhbHRoQmFyKCkge1xuICAgICAgICBpZiAodGhpcy5oZWFsdGhCYXIpIHtcbiAgICAgICAgICAgIGxldCBoZWFsdGhQZXJjZW50YWdlID0gdGhpcy5jdXJyZW50SGVhbHRoIC8gdGhpcy5tYXhIZWFsdGg7XG4gICAgICAgICAgICB0aGlzLmhlYWx0aEJhci53aWR0aCA9IDEwMCAqIGhlYWx0aFBlcmNlbnRhZ2U7XG4gICAgICAgIH1cbiAgICB9LFxuIFxuICAgIGRpZSgpIHtcbiAgICAgICAgLy8g6K6+572u5q275Lqh5qCH6K6wXG4gICAgICAgIGlmICh0aGlzLmlzRHlpbmcpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0R5aW5nID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vIOS9v+eUqCBwbGF5RWZmZWN0IOaSreaUvumfs+aViFxuICAgICAgICBpZiAodGhpcy5kZWF0aEF1ZGlvKSB7XG4gICAgICAgICAgICBsZXQgYXVkaW9JZCA9IGNjLmF1ZGlvRW5naW5lLnBsYXlFZmZlY3QodGhpcy5kZWF0aEF1ZGlvLCBmYWxzZSwgMC4zKTtcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnNldEZpbmlzaENhbGxiYWNrKGF1ZGlvSWQsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5vZGUuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIOeUn+aIkOaYn+aYn1xuICAgICAgICB0aGlzLnNwYXduU3RhcnMoMyk7XG4gICAgfSxcblxuICAgIHNwYXduU3RhcnMoY291bnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJQcmVmYWIpIHtcbiAgICAgICAgICAgIGNjLmVycm9yKCfmmJ/mmJ/pooTliLbkvZPmnKrorr7nva4hJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYW52YXNOb2RlID0gY2MuZmluZCgnQ2FudmFzJyk7XG4gICAgICAgIGNvbnN0IHdvcmxkUG9zID0gdGhpcy5ub2RlLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjYy5WZWMyLlpFUk8pO1xuICAgICAgICBjb25zdCBnYW1lTWFuYWdlciA9IGNhbnZhc05vZGUuZ2V0Q29tcG9uZW50KCdHYW1lTWFuYWdlcicpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhciA9IGNjLmluc3RhbnRpYXRlKHRoaXMuc3RhclByZWZhYik7XG4gICAgICAgICAgICBzdGFyLnBhcmVudCA9IGNhbnZhc05vZGU7XG4gICAgICAgICAgICBzdGFyLnpJbmRleCA9IDk5OTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsUG9zID0gY2FudmFzTm9kZS5jb252ZXJ0VG9Ob2RlU3BhY2VBUih3b3JsZFBvcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOmaj+acuuS9jee9ruWBj+enu1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMDtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAxMDA7XG4gICAgICAgICAgICBzdGFyLnNldFBvc2l0aW9uKGxvY2FsUG9zLnggKyBvZmZzZXRYLCBsb2NhbFBvcy55ICsgb2Zmc2V0WSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOa3u+WKoOeCueWHu+e7hOS7tlxuICAgICAgICAgICAgbGV0IGJ1dHRvbiA9IHN0YXIuYWRkQ29tcG9uZW50KGNjLkJ1dHRvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOa3u+WKoOeisOaSnue7hOS7tuS7peS+v+S6jueCueWHu1xuICAgICAgICAgICAgbGV0IGNvbGxpZGVyID0gc3Rhci5hZGRDb21wb25lbnQoY2MuQm94Q29sbGlkZXIpO1xuICAgICAgICAgICAgY29sbGlkZXIuc2l6ZSA9IHN0YXIuZ2V0Q29udGVudFNpemUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5re75Yqg54K55Ye75LqL5Lu2XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpczsgLy8g5L+d5a2YTW9uc3RlcuWunuS+i+eahOW8leeUqFxuICAgICAgICAgICAgYnV0dG9uLm5vZGUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIOemgeeUqOaMiemSrumYsuatouWkmuasoeeCueWHu1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5pbnRlcmFjdGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDojrflj5blnLrmma/kuK3nmoRzdGFyIG5vZGXkvY3nva5cbiAgICAgICAgICAgICAgICBjb25zdCBzdGFyTm9kZSA9IGNjLmZpbmQoJ0NhbnZhcy9nYW1lL3N0YXJDb2xsZWN0L3N0YXInKTtcbiAgICAgICAgICAgICAgICBpZiAoIXN0YXJOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNjLmVycm9yKCfmib7kuI3liLBzdGFyIG5vZGXvvIEnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB3b3JsZFRhcmdldFBvcyA9IHN0YXJOb2RlLmdldFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5Yqg6L295bm25pKt5pS+5pS26ZuG6Z+z5pWIXG4gICAgICAgICAgICAgICAgY2MucmVzb3VyY2VzLmxvYWQoJ2F1ZGlvcy9jb2xsZWN0JywgY2MuQXVkaW9DbGlwLCAoZXJyLCBhdWRpb0NsaXApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2MuZXJyb3IoJ+WKoOi9veaUtumbhumfs+aViOWksei0pTonLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnBsYXlFZmZlY3QoYXVkaW9DbGlwLCBmYWxzZSwgMy4wKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDliJvlu7rpo57lkJHnm67moIfnmoTliqjkvZxcbiAgICAgICAgICAgICAgICBjb25zdCBtb3ZlQWN0aW9uID0gY2Muc2VxdWVuY2UoXG4gICAgICAgICAgICAgICAgICAgIGNjLm1vdmVUbygwLjUsIHdvcmxkVGFyZ2V0UG9zKS5lYXNpbmcoY2MuZWFzZUJhY2tJbigpKSxcbiAgICAgICAgICAgICAgICAgICAgY2MuY2FsbEZ1bmMoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YCa55+lR2FtZU1hbmFnZXLlop7liqDmmJ/mmJ/mlbDph49cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVNYW5hZ2VyLmFkZFN0YXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc3Rhci5ydW5BY3Rpb24obW92ZUFjdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEeWluZykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgLy8g6I635Y+W546p5a626IqC54K5XG4gICAgICAgIGxldCBwbGF5ZXIgPSBjYy5maW5kKCdDYW52YXMvZ2FtZS9wbGF5ZXInKTtcbiAgICAgICAgaWYgKCFwbGF5ZXIpIHtcbiAgICAgICAgICAgIGNjLndhcm4oJ+aJvuS4jeWIsOeOqeWutuiKgueCue+8geivt+ehruS/neWcuuaZr+S4reeOqeWutuiKgueCueeahOi3r+W+hOaYryBDYW52YXMvZ2FtZS9wbGF5ZXInKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g6I635Y+W5LiW55WM5Z2Q5qCH5LiL55qE5L2N572uXG4gICAgICAgIGxldCBtb25zdGVyUG9zID0gdGhpcy5ub2RlLnBhcmVudC5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIodGhpcy5ub2RlLnBvc2l0aW9uKTtcbiAgICAgICAgbGV0IHBsYXllclBvcyA9IHBsYXllci5wYXJlbnQuY29udmVydFRvV29ybGRTcGFjZUFSKHBsYXllci5wb3NpdGlvbik7XG4gICAgICAgIFxuICAgICAgICAvLyDorqHnrpfkuI7njqnlrrbnmoTot53nprtcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gY2MuVmVjMi5kaXN0YW5jZShcbiAgICAgICAgICAgIGNjLnYyKG1vbnN0ZXJQb3MueCwgbW9uc3RlclBvcy55KSxcbiAgICAgICAgICAgIGNjLnYyKHBsYXllclBvcy54LCBwbGF5ZXJQb3MueSlcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOa3u+WKoOiwg+ivleaXpeW/l1xuICAgICAgICBjYy5sb2coJ+aAqueJqeS9jee9rjonLCBtb25zdGVyUG9zLCAn546p5a625L2N572uOicsIHBsYXllclBvcywgJ+i3neemuzonLCBkaXN0YW5jZSwgJ+ajgOa1i+iMg+WbtDonLCB0aGlzLmRldGVjdGlvblJhZGl1cyk7XG4gICAgICAgIFxuICAgICAgICAvLyDlnKjmo4DmtYvojIPlm7TlhoVcbiAgICAgICAgaWYgKGRpc3RhbmNlIDwgdGhpcy5kZXRlY3Rpb25SYWRpdXMpIHtcbiAgICAgICAgICAgIC8vIOi/vei4queOqeWutlxuICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IGNjLnYyKFxuICAgICAgICAgICAgICAgIHBsYXllclBvcy54IC0gbW9uc3RlclBvcy54LFxuICAgICAgICAgICAgICAgIHBsYXllclBvcy55IC0gbW9uc3RlclBvcy55XG4gICAgICAgICAgICApLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHkgPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlJpZ2lkQm9keSkubGluZWFyVmVsb2NpdHk7XG4gICAgICAgICAgICB2ZWxvY2l0eS54ID0gZGlyZWN0aW9uLnggKiB0aGlzLm1vdmVTcGVlZDtcbiAgICAgICAgICAgIHZlbG9jaXR5LnkgPSBkaXJlY3Rpb24ueSAqIHRoaXMubW92ZVNwZWVkO1xuICAgICAgICAgICAgdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5SaWdpZEJvZHkpLmxpbmVhclZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNjLmxvZygn5oCq54mp5q2j5Zyo56e75Yqo77yM6YCf5bqmOicsIHZlbG9jaXR5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5Y+R5bCE54K45by5XG4gICAgICAgICAgICB0aGlzLnNob290Qm9tYihwbGF5ZXIucG9zaXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g5YGc5q2i56e75YqoXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHkgPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlJpZ2lkQm9keSkubGluZWFyVmVsb2NpdHk7XG4gICAgICAgICAgICB2ZWxvY2l0eS54ID0gMDtcbiAgICAgICAgICAgIHZlbG9jaXR5LnkgPSAwO1xuICAgICAgICAgICAgdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5SaWdpZEJvZHkpLmxpbmVhclZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gICAgICAgICAgICBjYy5sb2coJ+aAqueJqeWBnOatouenu+WKqO+8jOi2heWHuuajgOa1i+iMg+WbtCcpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICBzaG9vdEJvbWIodGFyZ2V0UG9zKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gY2MuZGlyZWN0b3IuZ2V0VG90YWxUaW1lKCkgLyAxMDAwO1xuICAgICAgICBcbiAgICAgICAgY2MubG9nKCflsJ3or5Xlj5HlsITngrjlvLkgLSDlvZPliY3ml7bpl7Q6JywgY3VycmVudFRpbWUsIFxuICAgICAgICAgICAgICAgJ+S4iuasoeWPkeWwhOaXtumXtDonLCB0aGlzLmxhc3RTaG9vdFRpbWUsIFxuICAgICAgICAgICAgICAgJ+WPkeWwhOmXtOmalDonLCB0aGlzLnNob290SW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAn5piv5ZCm5Y+v5Lul5Y+R5bCEOicsIChjdXJyZW50VGltZSAtIHRoaXMubGFzdFNob290VGltZSA+PSB0aGlzLnNob290SW50ZXJ2YWwpKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjdXJyZW50VGltZSAtIHRoaXMubGFzdFNob290VGltZSA8IHRoaXMuc2hvb3RJbnRlcnZhbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuYm9tYlByZWZhYikge1xuICAgICAgICAgICAgY2MuZXJyb3IoJ+eCuOW8uemihOWItuS9k+acquiuvue9ru+8geivt+WcqOe8lui+keWZqOS4reiuvue9riBNb25zdGVyIOe7hOS7tueahCBCb21iIFByZWZhYiDlsZ7mgKcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5sYXN0U2hvb3RUaW1lID0gY3VycmVudFRpbWU7XG4gICAgICAgIFxuICAgICAgICAvLyDliJvlu7rngrjlvLlcbiAgICAgICAgbGV0IGJvbWIgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmJvbWJQcmVmYWIpO1xuICAgICAgICBpZiAoIWJvbWIpIHtcbiAgICAgICAgICAgIGNjLmVycm9yKCfngrjlvLnpooTliLbkvZPlrp7kvovljJblpLHotKXvvIEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g6K6+572u54K45by55L2N572u5Li65oCq54mp5b2T5YmN5L2N572uXG4gICAgICAgIGJvbWIuc2V0UG9zaXRpb24odGhpcy5ub2RlLnBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5ub2RlLnBhcmVudC5hZGRDaGlsZChib21iKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiuoeeul+aWueWQke+8iOS9v+eUqOacrOWcsOWdkOagh++8iVxuICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGFyZ2V0UG9zLnN1Yih0aGlzLm5vZGUucG9zaXRpb24pO1xuICAgICAgICBcbiAgICAgICAgLy8g6K6+572u54K45by55bGe5oCnXG4gICAgICAgIGxldCBib21iQ29tcCA9IGJvbWIuZ2V0Q29tcG9uZW50KCdCb21iJyk7XG4gICAgICAgIGlmIChib21iQ29tcCkge1xuICAgICAgICAgICAgYm9tYkNvbXAuc2V0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgICAgICAgICBib21iQ29tcC5zZXRTcGVlZCgzMDApOyAvLyDlop7liqDpgJ/luqbkvb/ngrjlvLnnp7vliqjmm7TmmI7mmL5cbiAgICAgICAgICAgIGJvbWJDb21wLnNldERhbWFnZSgyMCk7XG4gICAgICAgICAgICBjYy5sb2coJ+eCuOW8ueW3suWPkeWwhO+8geaWueWQkTonLCBkaXJlY3Rpb24sICfnm67moIfkvY3nva46JywgdGFyZ2V0UG9zLCAn5b2T5YmN5L2N572uOicsIHRoaXMubm9kZS5wb3NpdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYy5lcnJvcign54K45by55rKh5pyJQm9tYue7hOS7tu+8geivt+ehruS/neeCuOW8uemihOWItuS9k+W3sua3u+WKoCBCb21iIOe7hOS7ticpO1xuICAgICAgICAgICAgYm9tYi5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcbiJdfQ==