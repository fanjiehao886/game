{"version":3,"sources":["assets/scripts/ExplosionEffect.js"],"names":["cc","Class","Component","properties","damage","type","Integer","tooltip","duration","Float","onLoad","collider","getComponent","BoxCollider","addComponent","size","node","group","onCollisionEnter","other","self","log","player","takeDamage","scheduleOnce","isValid","destroy","onDestroy","unscheduleAllCallbacks"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,MAAM,EAAE;MACJ,WAAS,EADL;MAEJC,IAAI,EAAEL,EAAE,CAACM,OAFL;MAGJC,OAAO,EAAE;IAHL,CADA;IAMRC,QAAQ,EAAE;MACN,WAAS,GADH;MAENH,IAAI,EAAEL,EAAE,CAACS,KAFH;MAGNF,OAAO,EAAE;IAHH;EANF,CAHP;EAgBLG,MAhBK,oBAgBI;IACL;IACA,IAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBZ,EAAE,CAACa,WAArB,CAAf;;IACA,IAAI,CAACF,QAAL,EAAe;MACXA,QAAQ,GAAG,KAAKG,YAAL,CAAkBd,EAAE,CAACa,WAArB,CAAX;MACAF,QAAQ,CAACI,IAAT,GAAgBf,EAAE,CAACe,IAAH,CAAQ,EAAR,EAAY,EAAZ,CAAhB,CAFW,CAEsB;IACpC,CANI,CAQL;;;IACA,KAAKC,IAAL,CAAUC,KAAV,GAAkB,WAAlB;EACH,CA1BI;EA4BLC,gBA5BK,4BA4BYC,KA5BZ,EA4BmBC,IA5BnB,EA4ByB;IAAA;;IAC1BpB,EAAE,CAACqB,GAAH,CAAO,gBAAP,EAAyBF,KAAK,CAACH,IAAN,CAAWC,KAApC;;IAEA,IAAIE,KAAK,CAACH,IAAN,CAAWC,KAAX,KAAqB,QAAzB,EAAmC;MAC/B;MACA,IAAIK,MAAM,GAAGH,KAAK,CAACH,IAAN,CAAWJ,YAAX,CAAwB,QAAxB,CAAb;;MACA,IAAIU,MAAM,IAAIA,MAAM,CAACC,UAArB,EAAiC;QAC7BD,MAAM,CAACC,UAAP,CAAkB,KAAKnB,MAAvB;QACAJ,EAAE,CAACqB,GAAH,CAAO,cAAP,EAAuB,KAAKjB,MAA5B;MACH,CAN8B,CAQ/B;;;MACA,KAAKoB,YAAL,CAAkB,YAAM;QACpB,IAAI,KAAI,CAACR,IAAL,IAAa,KAAI,CAACA,IAAL,CAAUS,OAA3B,EAAoC;UAChCzB,EAAE,CAACqB,GAAH,CAAO,UAAP;;UACA,KAAI,CAACL,IAAL,CAAUU,OAAV;QACH;MACJ,CALD,EAKG,GALH;IAMH;EACJ,CA/CI;EAiDLC,SAjDK,uBAiDO;IACR,KAAKC,sBAAL;IACA5B,EAAE,CAACqB,GAAH,CAAO,SAAP;EACH;AApDI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        damage: {\n            default: 20,\n            type: cc.Integer,\n            tooltip: '爆炸伤害'\n        },\n        duration: {\n            default: 0.5,\n            type: cc.Float,\n            tooltip: '爆炸持续时间'\n        }\n    },\n\n    onLoad() {\n        // 添加碰撞组件\n        let collider = this.getComponent(cc.BoxCollider);\n        if (!collider) {\n            collider = this.addComponent(cc.BoxCollider);\n            collider.size = cc.size(40, 40); // 设置爆炸范围\n        }\n\n        // 设置碰撞分组\n        this.node.group = 'explosion';\n    },\n\n    onCollisionEnter(other, self) {\n        cc.log('爆炸效果碰撞 - 碰撞对象:', other.node.group);\n        \n        if (other.node.group === 'player') {\n            // 对玩家造成伤害\n            let player = other.node.getComponent('Player');\n            if (player && player.takeDamage) {\n                player.takeDamage(this.damage);\n                cc.log('爆炸效果对玩家造成伤害:', this.damage);\n            }\n            \n            // 0.5秒后销毁爆炸效果\n            this.scheduleOnce(() => {\n                if (this.node && this.node.isValid) {\n                    cc.log('爆炸效果即将销毁');\n                    this.node.destroy();\n                }\n            }, 0.5);\n        }\n    },\n\n    onDestroy() {\n        this.unscheduleAllCallbacks();\n        cc.log('爆炸效果被销毁');\n    }\n}); "]}