{"version":3,"sources":["assets/scripts/GoldManager.js"],"names":["cc","Class","Component","statics","instance","properties","goldLabel","Label","_worldPosition","Vec2","goldIcon","Node","collectEffect","AudioClip","onLoad","GoldManager","_updatePosition","node","on","EventType","POSITION_CHANGED","goldCount","updateDisplay","convertToWorldSpaceAR","v2","getWorldPosition","addGold","amount","audioEngine","playEffect","string","toString","tween","to","scale","start"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,OAAO,EAAE;IACLC,QAAQ,EAAE;EADL,CAHJ;EAOLC,UAAU,EAAE;IACRC,SAAS,EAAEN,EAAE,CAACO,KADN;IAERC,cAAc,EAAER,EAAE,CAACS,IAFX;IAGRC,QAAQ,EAAEV,EAAE,CAACW,IAHL;IAIRC,aAAa,EAAEZ,EAAE,CAACa;EAJV,CAPP;EAcLC,MAdK,oBAcI;IACLC,WAAW,CAACX,QAAZ,GAAuB,IAAvB;;IACA,KAAKY,eAAL;;IACA,KAAKC,IAAL,CAAUC,EAAV,CAAalB,EAAE,CAACW,IAAH,CAAQQ,SAAR,CAAkBC,gBAA/B,EAAiD,KAAKJ,eAAtD,EAAuE,IAAvE;IACA,KAAKK,SAAL,GAAiB,CAAjB;IACA,KAAKC,aAAL;EACH,CApBI;EAsBLN,eAtBK,6BAsBa;IACd,KAAKR,cAAL,GAAsB,KAAKS,IAAL,CAAUM,qBAAV,CAAgCvB,EAAE,CAACwB,EAAH,CAAM,CAAN,EAAS,CAAT,CAAhC,CAAtB;EACH,CAxBI;EA0BLC,gBA1BK,8BA0Bc;IACf,OAAO,KAAKjB,cAAL,IAAuBR,EAAE,CAACwB,EAAH,CAAM,CAAN,EAAS,CAAT,CAA9B;EACH,CA5BI;EA8BLE,OA9BK,mBA8BGC,MA9BH,EA8BW;IACZ,KAAKN,SAAL,IAAkBM,MAAlB;IACA,KAAKL,aAAL;;IACA,IAAG,KAAKV,aAAR,EAAuB;MACnBZ,EAAE,CAAC4B,WAAH,CAAeC,UAAf,CAA0B,KAAKjB,aAA/B,EAA8C,KAA9C;IACH;EACJ,CApCI;EAsCLU,aAtCK,2BAsCW;IACZ,KAAKhB,SAAL,CAAewB,MAAf,GAAwB,KAAKT,SAAL,CAAeU,QAAf,EAAxB;IACA/B,EAAE,CAACgC,KAAH,CAAS,KAAKtB,QAAd,EACKuB,EADL,CACQ,EADR,EACY;MAAEC,KAAK,EAAE;IAAT,CADZ,EAEKD,EAFL,CAEQ,EAFR,EAEY;MAAEC,KAAK,EAAE;IAAT,CAFZ,EAGKC,KAHL;EAIH;AA5CI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    statics: {\n        instance: null\n    },\n\n    properties: {\n        goldLabel: cc.Label,\n        _worldPosition: cc.Vec2,\n        goldIcon: cc.Node,\n        collectEffect: cc.AudioClip\n    },\n\n    onLoad() {\n        GoldManager.instance = this;\n        this._updatePosition();\n        this.node.on(cc.Node.EventType.POSITION_CHANGED, this._updatePosition, this);\n        this.goldCount = 0;\n        this.updateDisplay();\n    },\n\n    _updatePosition() {\n        this._worldPosition = this.node.convertToWorldSpaceAR(cc.v2(0, 0));\n    },\n\n    getWorldPosition() {\n        return this._worldPosition || cc.v2(0, 0);\n    },\n\n    addGold(amount) {\n        this.goldCount += amount;\n        this.updateDisplay();\n        if(this.collectEffect) {\n            cc.audioEngine.playEffect(this.collectEffect, false);\n        }\n    },\n\n    updateDisplay() {\n        this.goldLabel.string = this.goldCount.toString();\n        cc.tween(this.goldIcon)\n            .to(40, { scale: 1.2 })\n            .to(40, { scale: 1 })\n            .start();\n    }\n});"]}